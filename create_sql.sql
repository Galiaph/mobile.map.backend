CREATE DATABASE mobile;

CREATE TABLE providers(
id INT PRIMARY KEY AUTO_INCREMENT,
provider_name VARCHAR(100)
)ENGINE=INNODB;

CREATE TABLE operators(
id INT PRIMARY KEY AUTO_INCREMENT,
operator_name VARCHAR(100)
)ENGINE=INNODB;

CREATE TABLE districts(
id INT PRIMARY KEY AUTO_INCREMENT,
district_name VARCHAR(100),
geoCoords JSON DEFAULT NULL
)ENGINE=INNODB;

CREATE TABLE base_station(
    id INT PRIMARY KEY AUTO_INCREMENT,
    bs_name VARCHAR(50),
    bs_latitude VARCHAR(20),
    bs_longitude VARCHAR(20),
    bs_comment VARCHAR(200),
    bs_operator INT,
    bs_2g BOOLEAN DEFAULT 0,
    bs_3g BOOLEAN DEFAULT 0,
    bs_4g BOOLEAN DEFAULT 0,
    bs_status BOOLEAN DEFAULT 0,
    FOREIGN KEY (bs_operator) REFERENCES operators (id)
)ENGINE=INNODB;

CREATE TABLE users(
    id INT PRIMARY KEY AUTO_INCREMENT,
    user_name VARCHAR(20) UNIQUE,
    user_pass VARCHAR(200),
    user_full_name VARCHAR(50),
    root_access BOOLEAN DEFAULT 0
)ENGINE=INNODB;

CREATE TABLE lines_oper(
    id INT PRIMARY KEY AUTO_INCREMENT,
    hint VARCHAR(200),
    stroke_color VARCHAR(7) DEFAULT '#de66ff',
    stroke_width INT DEFAULT 4,
    geoCoords JSON DEFAULT NULL
)ENGINE=INNODB;

CREATE TABLE uplinks(
    id INT PRIMARY KEY AUTO_INCREMENT,
    bs_latitude VARCHAR(20),
    bs_longitude VARCHAR(20),
    providers JSON DEFAULT NULL
)ENGINE=INNODB;

CREATE TABLE providers_geo(
    id INT PRIMARY KEY AUTO_INCREMENT,
    latitude VARCHAR(20),
    longitude VARCHAR(20),
    balloon VARCHAR(200),
    provider INT,
    FOREIGN KEY (provider) REFERENCES providers (id)
)ENGINE=INNODB;

CREATE TABLE left_bank(
    id INT PRIMARY KEY AUTO_INCREMENT,
    station INT NOT NULL UNIQUE,
    FOREIGN KEY (station) REFERENCES base_station (id)
)ENGINE=INNODB;

CREATE USER 'mobile'@'localhost' IDENTIFIED BY 'password';
GRANT ALL PRIVILEGES ON mobile.* TO 'mobile'@'localhost' IDENTIFIED BY 'test' WITH GRANT OPTION;
SHOW GRANTS FOR 'mobile'@'localhost';
FLUSH PRIVILEGES;

INSERT operators(operator_name) VALUES('Mir-Telekom');
INSERT operators(operator_name) VALUES('K-Telekom');
INSERT operators(operator_name) VALUES('Phoenix');

INSERT providers(provider_name) VALUES('M-Нet');
INSERT providers(provider_name) VALUES('Торнадо');
INSERT providers(provider_name) VALUES('МЕДИАКОМСВЯЗЬ');

INSERT users(user_name, user_pass, user_full_name) VALUES('test', '098f6bcd4621d373cade4e832627b4f6', 'Иван Иванов');

INSERT base_station(bs_name, bs_latitude, bs_longitude, bs_comment, bs_operator, bs_2g, bs_3g, bs_4g, bs_status) VALUES('UH0801', '46.6399333333333', '32.6268083333333', "г,Херсон, ул,Перекопская,5, (46°38'23,76 32°37'36,51 Трубостойки. Контейнер.  КРРТ", 1, 1, 1, 1, 1);
INSERT base_station(bs_name, bs_latitude, bs_longitude, bs_comment, bs_operator, bs_2g, bs_3g, bs_4g, bs_status) VALUES('UH0802', '46.6451583333333', '32.5681944444444', "г,Херсон, ул,И,Богуна Ильича,95, (46°38'42,57 32°34'5,50 Трубостойки. Контейнер.", 1, 0, 0, 1, 1);
INSERT base_station(bs_name, bs_latitude, bs_longitude, bs_comment, bs_operator, bs_2g, bs_3g, bs_4g, bs_status) VALUES('UH0803', '46.6702222222222', '32.6164944444444', "г,Херсон, ул,49 Гвардейской дивизии,15, (46°40'12,80 32°36'59,38 Трубостойки. Помещение.", 1, 1, 1, 0, 1);
INSERT base_station(bs_name, bs_latitude, bs_longitude, bs_comment, bs_operator, bs_2g, bs_3g, bs_4g, bs_status) VALUES('UH0804', '46.6592577777777', '32.6349155555555', "г,Херсон,", 1, 1, 1, 0, 0);
INSERT base_station(bs_name, bs_latitude, bs_longitude, bs_comment, bs_operator, bs_2g, bs_3g, bs_4g, bs_status) VALUES('UH0805', '46.6567066666666', '32.6069400000000', "г,Херсон,", 1, 0, 1, 1, 1);

INSERT base_station(bs_name, bs_latitude, bs_longitude, bs_comment, bs_operator, bs_2g, bs_3g, bs_4g, bs_status) VALUES('ZN0201', '46.6399300000000', '32.6268088888888', "г,Херсон", 2, 1, 1, 1, 1);
INSERT base_station(bs_name, bs_latitude, bs_longitude, bs_comment, bs_operator, bs_2g, bs_3g, bs_4g, bs_status) VALUES('ZN0202', '46.6410500000000', '32.5623966666666', "г,Херсон", 2, 0, 0, 1, 1);
INSERT base_station(bs_name, bs_latitude, bs_longitude, bs_comment, bs_operator, bs_2g, bs_3g, bs_4g, bs_status) VALUES('ZN0203', '46.6675011111111', '32.6160300000000', "г,Херсон", 2, 1, 1, 0, 1);
INSERT base_station(bs_name, bs_latitude, bs_longitude, bs_comment, bs_operator, bs_2g, bs_3g, bs_4g, bs_status) VALUES('ZN0204', '46.6634699999999', '32.6274077777777', "г,Херсон", 2, 1, 1, 0, 1);
INSERT base_station(bs_name, bs_latitude, bs_longitude, bs_comment, bs_operator, bs_2g, bs_3g, bs_4g, bs_status) VALUES('ZN0205', '46.6791477777777', '32.6441099999999', "г,Херсон", 2, 0, 0, 1, 1);

INSERT base_station(bs_name, bs_latitude, bs_longitude, bs_comment, bs_operator, bs_2g, bs_3g, bs_4g, bs_status) VALUES('HP0201', '46.6273477777777', '32.6048966666666', "г,Херсон", 3, 1, 0, 1, 1);
INSERT base_station(bs_name, bs_latitude, bs_longitude, bs_comment, bs_operator, bs_2g, bs_3g, bs_4g, bs_status) VALUES('HP0202', '46.6283488888888', '32.5662333333333', "г,Херсон", 3, 0, 0, 1, 1);
INSERT base_station(bs_name, bs_latitude, bs_longitude, bs_comment, bs_operator, bs_2g, bs_3g, bs_4g, bs_status) VALUES('HP0203', '46.6314911111111', '32.6269211111111', "г,Херсон", 3, 1, 0, 0, 1);
INSERT base_station(bs_name, bs_latitude, bs_longitude, bs_comment, bs_operator, bs_2g, bs_3g, bs_4g, bs_status) VALUES('HP0204', '46.6418822222222', '32.6406799999999', "г,Херсон", 3, 1, 0, 0, 1);
INSERT base_station(bs_name, bs_latitude, bs_longitude, bs_comment, bs_operator, bs_2g, bs_3g, bs_4g, bs_status) VALUES('HP0205', '46.6559711111111', '32.6160511111111', "г,Херсон", 3, 0, 0, 1, 0);


INSERT lines_oper(hint, stroke_color, stroke_width, geoCoords) VALUES('Test', '#de66ff', 5, '[[46.62361381276697,32.6594821166992],[46.62905394604228,32.646435852050786],[46.63165555442548,32.62343322753906],[46.63969609380736,32.596997375488264],[46.65317312433787,32.596997375488264],[46.66262867206148,32.6213732910156],[46.65553716726371,32.63579284667967],[46.63993256205946,32.648152465820296]]')

INSERT uplinks(bs_latitude, bs_longitude, providers) VALUES('46.24204', '33.30097', '[{"name":"net","comment":"sadfasdfaswe","speed":"8 Gbit"},{"name":"1-net","comment":"sdfaskdhfkashdfasd","speed":"18 Gbit"},{"name":"2-net","comment":"г.Геническ","speed":"80 Gbit"}]');

INSERT districts(district_name, geoCoords) VALUES('Бериславский район', '[[[32.905639,47.120964],[32.9174,47.131885],[32.916091,47.144222],[32.920252999999995,47.147524999999995],[32.92744,47.149176999999995],[32.943901,47.160789],[32.952247,47.170913],[32.960848999999996,47.189712],[32.982372,47.191558],[32.988315,47.19379],[32.991279,47.192909],[32.990013,47.18922],[32.995868,47.191001],[33.002609,47.189498],[33.004261,47.191168999999995],[33.000568,47.192564999999995],[33.000549,47.195335],[33.005995999999996,47.196365],[33.012541999999996,47.191299],[33.014666999999996,47.187545],[33.012737,47.183681],[33.016577999999996,47.179969],[33.026252,47.176452],[33.038486,47.178039],[33.035675,47.183727],[33.03767,47.188232],[33.053225999999995,47.191233999999994],[33.066402,47.200378],[33.065521,47.218810999999995],[33.067389999999996,47.220138],[33.074962,47.217498],[33.072818,47.223098],[33.080734,47.220138],[33.089186999999995,47.223594],[33.098093999999996,47.223659],[33.105819,47.217178],[33.104724,47.212607999999996],[33.111957,47.206191999999994],[33.117126,47.203765],[33.130218,47.202563999999995],[33.143135,47.209838],[33.135025,47.212478],[33.129981,47.218101],[33.127449,47.223895999999996],[33.128158,47.23104],[33.134056,47.233036],[33.142897999999995,47.230201],[33.147617,47.230525],[33.153090999999996,47.234770999999995],[33.16238,47.236404],[33.163688,47.235523],[33.159698,47.232368],[33.163196,47.23162],[33.167167,47.234213999999994],[33.172508,47.233551],[33.176456,47.237606],[33.183647,47.237949],[33.136741,47.267238],[33.140129,47.271915],[33.119918,47.277301],[33.11835,47.281379],[33.10498,47.279491],[33.101593,47.290133999999995],[33.109786,47.293479],[33.110969,47.30067],[33.103286,47.32172],[33.130794,47.32777],[33.133243,47.331996],[33.138843,47.333262999999995],[33.131202,47.350151],[33.121761,47.38961],[33.040546,47.379546999999995],[33.038208,47.382186],[33.028827,47.422934999999995],[33.038208,47.42538],[33.034194,47.441345],[33.054168,47.443599],[33.046915999999996,47.468512999999994],[33.07138,47.475528],[33.071273,47.412014],[33.137748,47.419418],[33.124317,47.476707],[33.128093,47.477138],[33.127189,47.479904],[33.13071,47.480357999999995],[33.123027,47.508292999999995],[33.147017999999996,47.514389],[33.140837999999995,47.543251],[33.094768,47.52737],[33.088783,47.551403],[33.092365,47.579277],[33.170986,47.56668],[33.18663,47.573955],[33.195361999999996,47.570156],[33.206993,47.569106999999995],[33.226172999999996,47.573352],[33.232352999999996,47.577667],[33.237460999999996,47.570823],[33.235808999999996,47.562174999999996],[33.229286,47.554172],[33.218601,47.548632999999995],[33.221838999999996,47.544624],[33.221969,47.539474],[33.215250999999995,47.5331],[33.2233,47.530372],[33.241474,47.530181],[33.255935,47.536083],[33.273489999999995,47.546382],[33.284088,47.545311],[33.287971,47.542221],[33.28778,47.528572],[33.27909,47.520739999999996],[33.278811999999995,47.517542999999996],[33.295742,47.504753],[33.310009,47.501490999999994],[33.314879999999995,47.490463],[33.307586,47.486194],[33.313784999999996,47.481922],[33.348827,47.493381],[33.329772,47.510031999999995],[33.324473999999995,47.522650999999996],[33.412448,47.534858],[33.472446,47.541038],[33.485878,47.545696],[33.474395,47.587215],[33.579238,47.600048],[33.582865999999996,47.588049999999996],[33.587973999999996,47.588504],[33.59233,47.573463],[33.604923,47.57505],[33.608356,47.561057999999996],[33.589431,47.558074],[33.593616,47.544447999999996],[33.580783,47.532154],[33.588378,47.502372],[33.604667,47.504343999999996],[33.603443,47.510009],[33.635695999999996,47.514495],[33.643741,47.484775],[33.818107,47.504408999999995],[33.905609,47.511146],[33.937732,47.516448],[33.94065,47.515032999999995],[33.94754,47.499815999999996],[33.95243,47.459136],[33.955436,47.457397],[33.9985,47.459392],[33.994006,47.356029],[33.999763,47.339541],[33.999542,47.331652999999996],[33.991158,47.319533],[33.982247,47.290293],[33.960481,47.245788999999995],[33.926401999999996,47.210598],[33.905845,47.195484],[33.877970999999995,47.180156],[33.831508,47.163412],[33.817944,47.117177],[33.804119,47.094681],[33.798573,47.089413],[33.751062,47.055212999999995],[33.736478,47.048750999999996],[33.707146,47.040343],[33.695447,47.032399999999996],[33.692043999999996,47.012304],[33.686727,47.004377],[33.68096,46.983543999999995],[33.670244,46.961228],[33.651019,46.936575999999995],[33.647174,46.928421],[33.620246,46.911832999999994],[33.613475,46.894636999999996],[33.610623,46.870768],[33.603317,46.856877999999995],[33.596588,46.849526999999995],[33.584271,46.842144999999995],[33.570102999999996,46.83801],[33.541474,46.836689],[33.517956,46.840737],[33.503142,46.840733],[33.488997999999995,46.837334],[33.455707,46.825202],[33.416682,46.802510999999996],[33.399384,46.80446],[33.382252,46.81838],[33.367975,46.824090999999996],[33.350843,46.835155],[33.330855,46.84158],[33.322646,46.840151999999996],[33.298019,46.84158],[33.295162999999995,46.836583],[33.296948,46.833014],[33.312652,46.813026],[33.311293,46.80856],[33.289265,46.787836999999996],[33.289567,46.783076],[33.317292,46.769481999999996],[33.319790999999995,46.763058],[33.315486,46.753971],[33.289062,46.751098999999996],[33.251101,46.764072],[33.201952,46.770194],[33.14504,46.784098],[33.12779,46.779844],[33.09668,46.767393],[33.046228,46.744118],[33.023179999999996,46.83589],[32.98578,46.831418],[32.979821,46.863439],[33.01587,46.864867],[33.007304,46.904485],[33.068694,46.906627],[33.054417,46.954811],[33.022304,46.97224],[33.068031,47.022040999999994],[32.923041999999995,47.084804],[32.916004,47.086414],[32.909481,47.095233],[32.913986,47.104651999999994],[32.912143,47.114353]]]');

UPDATE districts SET geoCoords='[[32.905639,47.120964],[32.9174,47.131885],[32.916091,47.144222],[32.920252999999995,47.147524999999995],[32.92744,47.149176999999995],[32.943901,47.160789],[32.952247,47.170913],[32.960848999999996,47.189712],[32.982372,47.191558],[32.988315,47.19379],[32.991279,47.192909],[32.990013,47.18922],[32.995868,47.191001],[33.002609,47.189498],[33.004261,47.191168999999995],[33.000568,47.192564999999995],[33.000549,47.195335],[33.005995999999996,47.196365],[33.012541999999996,47.191299],[33.014666999999996,47.187545],[33.012737,47.183681],[33.016577999999996,47.179969],[33.026252,47.176452],[33.038486,47.178039],[33.035675,47.183727],[33.03767,47.188232],[33.053225999999995,47.191233999999994],[33.066402,47.200378],[33.065521,47.218810999999995],[33.067389999999996,47.220138],[33.074962,47.217498],[33.072818,47.223098],[33.080734,47.220138],[33.089186999999995,47.223594],[33.098093999999996,47.223659],[33.105819,47.217178],[33.104724,47.212607999999996],[33.111957,47.206191999999994],[33.117126,47.203765],[33.130218,47.202563999999995],[33.143135,47.209838],[33.135025,47.212478],[33.129981,47.218101],[33.127449,47.223895999999996],[33.128158,47.23104],[33.134056,47.233036],[33.142897999999995,47.230201],[33.147617,47.230525],[33.153090999999996,47.234770999999995],[33.16238,47.236404],[33.163688,47.235523],[33.159698,47.232368],[33.163196,47.23162],[33.167167,47.234213999999994],[33.172508,47.233551],[33.176456,47.237606],[33.183647,47.237949],[33.136741,47.267238],[33.140129,47.271915],[33.119918,47.277301],[33.11835,47.281379],[33.10498,47.279491],[33.101593,47.290133999999995],[33.109786,47.293479],[33.110969,47.30067],[33.103286,47.32172],[33.130794,47.32777],[33.133243,47.331996],[33.138843,47.333262999999995],[33.131202,47.350151],[33.121761,47.38961],[33.040546,47.379546999999995],[33.038208,47.382186],[33.028827,47.422934999999995],[33.038208,47.42538],[33.034194,47.441345],[33.054168,47.443599],[33.046915999999996,47.468512999999994],[33.07138,47.475528],[33.071273,47.412014],[33.137748,47.419418],[33.124317,47.476707],[33.128093,47.477138],[33.127189,47.479904],[33.13071,47.480357999999995],[33.123027,47.508292999999995],[33.147017999999996,47.514389],[33.140837999999995,47.543251],[33.094768,47.52737],[33.088783,47.551403],[33.092365,47.579277],[33.170986,47.56668],[33.18663,47.573955],[33.195361999999996,47.570156],[33.206993,47.569106999999995],[33.226172999999996,47.573352],[33.232352999999996,47.577667],[33.237460999999996,47.570823],[33.235808999999996,47.562174999999996],[33.229286,47.554172],[33.218601,47.548632999999995],[33.221838999999996,47.544624],[33.221969,47.539474],[33.215250999999995,47.5331],[33.2233,47.530372],[33.241474,47.530181],[33.255935,47.536083],[33.273489999999995,47.546382],[33.284088,47.545311],[33.287971,47.542221],[33.28778,47.528572],[33.27909,47.520739999999996],[33.278811999999995,47.517542999999996],[33.295742,47.504753],[33.310009,47.501490999999994],[33.314879999999995,47.490463],[33.307586,47.486194],[33.313784999999996,47.481922],[33.348827,47.493381],[33.329772,47.510031999999995],[33.324473999999995,47.522650999999996],[33.412448,47.534858],[33.472446,47.541038],[33.485878,47.545696],[33.474395,47.587215],[33.579238,47.600048],[33.582865999999996,47.588049999999996],[33.587973999999996,47.588504],[33.59233,47.573463],[33.604923,47.57505],[33.608356,47.561057999999996],[33.589431,47.558074],[33.593616,47.544447999999996],[33.580783,47.532154],[33.588378,47.502372],[33.604667,47.504343999999996],[33.603443,47.510009],[33.635695999999996,47.514495],[33.643741,47.484775],[33.818107,47.504408999999995],[33.905609,47.511146],[33.937732,47.516448],[33.94065,47.515032999999995],[33.94754,47.499815999999996],[33.95243,47.459136],[33.955436,47.457397],[33.9985,47.459392],[33.994006,47.356029],[33.999763,47.339541],[33.999542,47.331652999999996],[33.991158,47.319533],[33.982247,47.290293],[33.960481,47.245788999999995],[33.926401999999996,47.210598],[33.905845,47.195484],[33.877970999999995,47.180156],[33.831508,47.163412],[33.817944,47.117177],[33.804119,47.094681],[33.798573,47.089413],[33.751062,47.055212999999995],[33.736478,47.048750999999996],[33.707146,47.040343],[33.695447,47.032399999999996],[33.692043999999996,47.012304],[33.686727,47.004377],[33.68096,46.983543999999995],[33.670244,46.961228],[33.651019,46.936575999999995],[33.647174,46.928421],[33.620246,46.911832999999994],[33.613475,46.894636999999996],[33.610623,46.870768],[33.603317,46.856877999999995],[33.596588,46.849526999999995],[33.584271,46.842144999999995],[33.570102999999996,46.83801],[33.541474,46.836689],[33.517956,46.840737],[33.503142,46.840733],[33.488997999999995,46.837334],[33.455707,46.825202],[33.416682,46.802510999999996],[33.399384,46.80446],[33.382252,46.81838],[33.367975,46.824090999999996],[33.350843,46.835155],[33.330855,46.84158],[33.322646,46.840151999999996],[33.298019,46.84158],[33.295162999999995,46.836583],[33.296948,46.833014],[33.312652,46.813026],[33.311293,46.80856],[33.289265,46.787836999999996],[33.289567,46.783076],[33.317292,46.769481999999996],[33.319790999999995,46.763058],[33.315486,46.753971],[33.289062,46.751098999999996],[33.251101,46.764072],[33.201952,46.770194],[33.14504,46.784098],[33.12779,46.779844],[33.09668,46.767393],[33.046228,46.744118],[33.023179999999996,46.83589],[32.98578,46.831418],[32.979821,46.863439],[33.01587,46.864867],[33.007304,46.904485],[33.068694,46.906627],[33.054417,46.954811],[33.022304,46.97224],[33.068031,47.022040999999994],[32.923041999999995,47.084804],[32.916004,47.086414],[32.909481,47.095233],[32.913986,47.104651999999994],[32.912143,47.114353],[32.905639,47.120964]]' WHERE id=1;